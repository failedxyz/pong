<html>
	<head>
		<title>Pong</title>
		<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js"></script>
		<style type="text/css">
			body {
				background-color: #F0F0F0;
			}
            #holder {
				left: 50%;
				margin: -240px 0 0 -320px;
				position: absolute;
				top: 50%;
				height: 600px;
				margin: -300px 0 0 -300px;
				width: 600px;
            }
		</style>
	</head>
	<body>
		<div id="holder"></div>
		<script type="text/javascript">
			var p_player, track;
			var player = 0;
			var r = Raphael("holder", 600, 600);
			var keys = { };
			r.customAttributes.arc = function(xloc, yloc, value, total, R) {
				var alpha = 360 / total * value,
					a = (90 - alpha) * Math.PI / 180,
					x = xloc + R * Math.cos(a),
					y = yloc - R * Math.sin(a),
					path;
				if (total == value) {
					path = [
						["M", xloc, yloc - R],
						["A", R, R, 0, 1, 1, xloc - 0.01, yloc - R]
					];
				} else {
					path = [
						["M", xloc, yloc - R],
						["A", R, R, 0, +(alpha > 180), 1, x, y]
					];
				}
				return {
					path: path
				};
			};
			var frame = function() {
				console.log(new Date().getTime());
				track = r.circle(300, 300, 295);
				track.attr("stroke", "#E0E0E0");
				track.attr("stroke-width", 5);
				p_player = r.path().attr({ stroke: "#000", "stroke-width": 5, arc: [300, 300, player, 100, 295] });
				if (keys[37]) {
					player -= 0.1;
				}
				if (keys[39]) {
					player += 0.1;
				}
			};
			setInterval(frame, 30);
			document.onkeydown = function(e) {
				keys[e.keyCode] = true;
			};
			document.onkeyup = function(e) {
				keys[e.keyCode] = false;
			};
			frame();
		</script>
	</body>
</html>